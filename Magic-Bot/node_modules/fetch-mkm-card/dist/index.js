"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.fetchMkmCard = void 0;
var node_fetch_1 = require("node-fetch");
var oauth_1 = require("./oauth");
var _keys = {
    appToken: "",
    accessToken: "",
    secret: "",
};
function fetchMkmCard(name) {
    var url = "https://api.cardmarket.com/ws/v1.1/output.json/products/" + name + "/1/1/false";
    return node_fetch_1.default(url, {
        headers: {
            Authorization: oauth_1.oauth(url, _keys),
        },
    });
}
exports.fetchMkmCard = fetchMkmCard;
fetchMkmCard.init = function (keys) {
    _keys.appToken = keys.appToken;
    _keys.accessToken = keys.accessToken;
    var encodedAppSecret = encodeURIComponent(keys.appSecret);
    var encodedAccessTokenSecret = encodeURIComponent(keys.accessTokenSecret);
    _keys.secret = encodedAppSecret + "&" + encodedAccessTokenSecret;
};
